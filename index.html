<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LS4YOU - La Boussole des Valeurs</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@800;900&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --ls-red: #E63946;
            --ls-yellow: #FFB703;
            --ls-turquoise: #2EC4B6;
            --ls-pink: #FF99AC;
            --ls-dark: #1D3557;
            --ls-white: #FFFFFF;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--ls-white);
            color: var(--ls-dark);
            min-height: 100vh;
            overflow-x: hidden;
        }

        h1, h2, h3, h4 { font-family: 'Montserrat', sans-serif; font-weight: 900; }

        .dot-grid {
            background-image: radial-gradient(var(--ls-dark) 1px, transparent 1px);
            background-size: 16px 16px;
            opacity: 0.08;
        }

        /* Style Carte "Compétences" */
        .choice-card {
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            border: 3px solid var(--ls-dark);
            background: white;
            position: relative;
            box-shadow: 4px 4px 0px var(--ls-dark);
        }
        
        .choice-card:hover { 
            transform: translate(-2px, -2px); 
            box-shadow: 8px 8px 0px var(--ls-red);
            border-color: var(--ls-red);
        }

        .choice-card.selected {
            background-color: var(--ls-red);
            color: white;
            border-color: var(--ls-dark);
            box-shadow: 4px 4px 0px var(--ls-dark);
            transform: translate(2px, 2px);
        }

        .btn-primary {
            background-color: var(--ls-red);
            color: white;
            border: 3px solid var(--ls-dark);
            padding: 1rem 2rem;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 4px 4px 0px var(--ls-dark);
            transition: all 0.2s;
        }
        .btn-primary:hover:not(:disabled) { 
            transform: translate(-2px, -2px); 
            box-shadow: 6px 6px 0px var(--ls-dark);
        }
        .btn-primary:active {
            transform: translate(2px, 2px);
            box-shadow: 0px 0px 0px var(--ls-dark);
        }
        .btn-primary:disabled { opacity: 0.3; cursor: not-allowed; }

        /* Progress Bar */
        .progress-container {
            height: 12px;
            background: #F1F5F9;
            border: 2px solid var(--ls-dark);
        }

        /* Formes Géométriques Résultats */
        .shape-yellow {
            position: absolute;
            width: 600px;
            height: 600px;
            background: var(--ls-yellow);
            border-radius: 50%;
            top: -200px;
            right: -200px;
            z-index: 0;
        }

        .shape-red-circle {
            width: 300px;
            height: 300px;
            background: var(--ls-red);
            border: 4px solid var(--ls-dark);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 10;
            box-shadow: 15px 15px 0px var(--ls-turquoise);
        }

        .portrait-img {
            width: 270px;
            height: 270px;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid white;
        }

        @media print { 
            .no-print { display: none !important; }
            body { background: white !important; }
            #results-view { padding: 40px !important; }
        }

        .animate-pop { animation: pop 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        @keyframes pop { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }
    </style>
</head>
<body class="antialiased flex flex-col min-h-screen">

    <!-- Header -->
    <header class="bg-white px-8 py-5 flex justify-between items-center border-b-4 border-ls-dark no-print sticky top-0 z-50">
        <div class="flex items-center gap-6">
            <img src="https://www.lifeskills4youth.eu/wp-content/uploads/2024/07/LS4YOU_Logo_whiteback.jpg" alt="Logo LS4YOU" class="h-10">
            <div class="hidden md:block h-8 w-[2px] bg-slate-200"></div>
            <h1 class="hidden md:block text-xs font-900 uppercase tracking-widest text-slate-400">Atelier : La Boussole des Valeurs</h1>
        </div>
        <div class="flex items-center gap-3">
            <div class="text-[10px] font-900 text-right leading-none uppercase">Cofinancé par<br>l'Union européenne</div>
            <img src="https://upload.wikimedia.org/wikipedia/commons/b/b7/Flag_of_Europe.svg" alt="UE" class="h-6 border border-slate-100">
        </div>
    </header>

    <!-- Quiz View -->
    <main id="game-view" class="flex-grow flex flex-col no-print p-6 lg:p-16 relative">
        <div class="dot-grid absolute inset-0 pointer-events-none"></div>
        
        <div class="max-w-6xl mx-auto w-full relative z-10">
            <!-- Title & Progress -->
            <div class="flex flex-col md:flex-row justify-between items-start md:items-end gap-8 mb-16">
                <div>
                    <h2 class="text-5xl lg:text-7xl leading-[0.85] text-ls-dark uppercase mb-6">
                        Ma boussole<br><span class="text-ls-red">PRO</span>
                    </h2>
                    <div class="flex gap-3">
                        <div class="w-24 h-3 bg-ls-turquoise border-2 border-ls-dark"></div>
                        <div class="w-10 h-3 bg-ls-yellow border-2 border-ls-dark"></div>
                        <div class="w-6 h-3 bg-ls-pink border-2 border-ls-dark"></div>
                    </div>
                </div>
                
                <div class="w-full md:w-80">
                    <div class="flex justify-between text-xs font-900 uppercase mb-3">
                        <span id="step-label" class="bg-ls-dark text-white px-3 py-1">Étape 1 / 10</span>
                        <span id="step-percent" class="text-ls-dark">0%</span>
                    </div>
                    <div class="progress-container">
                        <div id="progress-fill" class="h-full bg-ls-turquoise" style="width: 10%"></div>
                    </div>
                </div>
            </div>

            <!-- Quiz Content -->
            <div id="quiz-container" class="min-h-[400px]">
                <!-- Injecté par JS -->
            </div>

            <div class="mt-12 flex justify-end">
                <button id="btn-next" onclick="nextStep()" class="btn-primary" disabled>Continuer</button>
            </div>
        </div>
    </main>

    <!-- Results View -->
    <div id="results-view" class="hidden relative min-h-screen bg-white overflow-hidden p-10 lg:p-24 flex flex-col lg:flex-row items-center justify-between gap-16">
        <div class="shape-yellow"></div>
        <div class="dot-grid absolute inset-0 opacity-10"></div>
        
        <!-- Left Column -->
        <div class="relative z-20 max-w-2xl animate-pop">
            <div class="mb-12">
                <img src="https://www.lifeskills4youth.eu/wp-content/uploads/2024/07/LS4YOU_Logo_whiteback.jpg" alt="Logo LS4YOU" class="h-12 mb-10 no-print">
                <h2 class="text-6xl lg:text-8xl leading-[0.8] text-ls-dark uppercase mb-8">
                    MA BOUSSOLE<br><span class="text-ls-red">DÉCRYPTÉE</span>
                </h2>
                <div class="flex gap-3 mb-10">
                    <div class="w-32 h-5 bg-ls-turquoise border-3 border-ls-dark"></div>
                    <div class="w-12 h-5 bg-ls-yellow border-3 border-ls-dark"></div>
                </div>
                <p class="text-2xl font-bold text-slate-700 uppercase tracking-tighter leading-tight max-w-lg">
                    Voici les 3 piliers qui guident mon épanouissement au travail.
                </p>
            </div>

            <div id="top3-results" class="space-y-8 mb-16">
                <!-- Injecté par JS -->
            </div>

            <div class="bg-white border-4 border-ls-dark p-8 shadow-[10px_10px_0px_var(--ls-turquoise)]">
                <p id="pitch-text" class="text-xl font-medium text-slate-800 leading-relaxed italic">
                    <!-- Texte de pitch -->
                </p>
            </div>

            <div class="mt-16 flex flex-wrap gap-6 no-print">
                <button onclick="window.print()" class="btn-primary">Télécharger le bilan</button>
                <button onclick="location.reload()" class="text-xs font-900 uppercase tracking-widest text-slate-400 hover:text-ls-dark transition-colors">Recommencer l'atelier</button>
            </div>
        </div>

        <!-- Right Column (Geometric) -->
        <div class="relative z-20 flex items-center justify-center animate-pop" style="animation-delay: 0.2s">
            <div class="shape-red-circle">
                <img src="https://images.unsplash.com/photo-1573497019940-1c28c88b4f3e?auto=format&fit=crop&w=600&q=80" alt="Profil" class="portrait-img">
            </div>
            
            <!-- Floating Elements -->
            <div class="absolute -top-12 -right-12 w-32 h-32 bg-ls-turquoise border-4 border-ls-dark -rotate-12 z-0"></div>
            <div class="absolute -bottom-10 -left-10 w-24 h-24 dot-grid border-4 border-ls-dark z-0 opacity-40"></div>
            
            <svg class="puzzle-icon" style="position:absolute; bottom:-40px; right:-20px; width:120px; fill:var(--ls-yellow); filter: drop-shadow(4px 4px 0px var(--ls-dark));" viewBox="0 0 24 24">
                <path d="M18.88 12.17c.56 0 1.12-.13 1.62-.4.43-.22.8-.52 1.1-.9.3-.37.52-.8.65-1.27.13-.47.15-.96.06-1.44-.1-.48-.3-.93-.6-1.33-.3-.4-.68-.72-1.13-.95-.45-.23-.94-.35-1.44-.35-.5 0-.99.12-1.44.35-.45.23-.83.55-1.13.95s-.5 0.85-.6 1.33c-0.09 0.48-0.07 0.97 0.06 1.44s0.35 0.9 0.65 1.27c0.3 0.38 0.67 0.68 1.1 0.9s1.06 0.4 1.62 0.4zM5 14h2v2h2v2h2v2h2v-2h2v-2h2v-2h2v-2h-2v-2h-2V8h-2V6h-2V4h-2v2H9v2H7v2H5v2H3v2h2z" />
            </svg>
        </div>

        <!-- Footer Info -->
        <div class="absolute bottom-10 left-10 right-10 flex justify-between items-end border-t-2 border-slate-100 pt-8 no-print">
            <div class="text-[10px] font-900 text-slate-300 uppercase tracking-[0.3em]">LS4YOU • Mission Locale Pays Basque • 2026</div>
            <div class="flex gap-4">
                <div class="w-10 h-3 bg-ls-red border-2 border-ls-dark"></div>
                <div class="w-10 h-3 bg-ls-yellow border-2 border-ls-dark"></div>
                <div class="w-10 h-3 bg-ls-turquoise border-2 border-ls-dark"></div>
            </div>
        </div>
    </div>

    <script>
        const VALS = {
            respect: { label: "Respect", icon: "user-check", desc: "Être traité avec dignité par tous les membres de l'organisation." },
            ambiance: { label: "Ambiance", icon: "smile", desc: "Le plaisir partagé et la convivialité au quotidien." },
            securite: { label: "Sécurité", icon: "shield-check", desc: "Stabilité d'emploi et sérénité face à l'avenir financier." },
            liberte: { label: "Liberté", icon: "wind", desc: "L'indépendance dans la gestion de ses propres missions." },
            utilite: { label: "Utilité", icon: "heart", desc: "La conviction que mon travail apporte une valeur réelle à la société." },
            justice: { label: "Justice", icon: "scale", desc: "Équité de traitement et respect strict des engagements." },
            creativite: { label: "Créativité", icon: "palette", desc: "Liberté d'innover et d'apporter des solutions originales." },
            evolution: { label: "Évolution", icon: "trending-up", desc: "Perspectives de montée en grade et en responsabilités." },
            reconnaissance: { label: "Reconnaissance", icon: "award", desc: "Valorisation claire de l'investissement et des résultats." },
            equilibre: { label: "Équilibre", icon: "life-buoy", desc: "Préservation stricte du temps de vie personnelle." },
            solidarite: { label: "Solidarité", icon: "users", desc: "Entraide mutuelle et soutien inconditionnel de l'équipe." },
            challenge: { label: "Challenge", icon: "trophy", desc: "Objectifs ambitieux qui poussent à se surpasser." },
            autonomie: { label: "Autonomie", icon: "zap", desc: "Capacité à décider et agir sans supervision constante." },
            apprentissage: { label: "Apprentissage", icon: "graduation-cap", desc: "Développement continu des savoir-faire." },
            argent: { label: "Argent", icon: "banknote", desc: "Rémunération permettant un confort de vie satisfaisant." }
        };

        const SCENARIOS = [
            {
                context: "C'est ton premier jour. Ton nouveau bureau est prêt.",
                question: "Qu'est-ce qui te fait le plus plaisir ?",
                choices: [
                    { text: "L'équipe t'accueille avec un déjeuner de bienvenue", values: ['ambiance', 'solidarite'], icon: "users" },
                    { text: "On te confie les clés d'un projet dès la première heure", values: ['autonomie', 'creativite'], icon: "key" },
                    { text: "Ton contrat est déjà signé et ton bureau est stable", values: ['securite', 'justice'], icon: "file-check" }
                ]
            },
            {
                context: "Il y a une erreur dans un projet important.",
                question: "Comment souhaites-tu que ce soit géré ?",
                choices: [
                    { text: "On cherche une solution ensemble sans blâmer personne", values: ['solidarite', 'respect'], icon: "help-circle" },
                    { text: "Le manager est juste : chacun assume sa part d'erreur", values: ['justice', 'respect'], icon: "scale" },
                    { text: "C'est un challenge pour apprendre de nouvelles méthodes", values: ['apprentissage', 'challenge'], icon: "lightbulb" }
                ]
            },
            {
                context: "On te propose une promotion exceptionnelle.",
                question: "Qu'est-ce qui t'attire le plus ?",
                choices: [
                    { text: "Le nouveau salaire qui va avec", values: ['argent', 'securite'], icon: "banknote" },
                    { text: "Le titre et le prestige de la fonction", values: ['reconnaissance', 'evolution'], icon: "award" },
                    { text: "Le pouvoir de changer les choses en toute liberté", values: ['liberte', 'autonomie'], icon: "wind" }
                ]
            },
            {
                context: "Ton entreprise change ses horaires de travail.",
                question: "Quelle option te conviendrait le mieux ?",
                choices: [
                    { text: "Horaires libres, tu gères ton temps comme tu veux", values: ['liberte', 'equilibre'], icon: "clock" },
                    { text: "Horaires fixes et stables pour s'organiser sereinement", values: ['securite', 'equilibre'], icon: "calendar" },
                    { text: "Horaires flexibles pour aider les collègues si besoin", values: ['solidarite', 'ambiance'], icon: "shuffle" }
                ]
            },
            {
                context: "Une tâche urgente arrive un vendredi soir à 16h30.",
                question: "Que fais-tu ?",
                choices: [
                    { text: "Tu pars : ton week-end est sacré", values: ['equilibre', 'liberte'], icon: "home" },
                    { text: "Tu restes pour boucler ça et montrer ton sérieux", values: ['reconnaissance', 'challenge'], icon: "check-circle" },
                    { text: "Tu restes si les autres restent : on est une équipe", values: ['solidarite', 'respect'], icon: "users" }
                ]
            },
            {
                context: "Tu as fini tes tâches habituelles en avance.",
                question: "Comment occupes-tu ton temps ?",
                choices: [
                    { text: "Tu lances un projet créatif de ton côté", values: ['creativite', 'autonomie'], icon: "palette" },
                    { text: "Tu vas aider un collègue qui est débordé", values: ['solidarite', 'ambiance'], icon: "heart" },
                    { text: "Tu demandes une formation pour monter en compétence", values: ['apprentissage', 'evolution'], icon: "graduation-cap" }
                ]
            },
            {
                context: "Une entreprise concurrente te propose un job.",
                question: "Qu'est-ce qui te ferait rester chez toi ?",
                choices: [
                    { text: "La peur de perdre ta stabilité actuelle", values: ['securite', 'justice'], icon: "shield" },
                    { text: "Le lien fort que tu as avec tes collègues", values: ['ambiance', 'solidarite'], icon: "smile" },
                    { text: "Le sentiment d'être indispensable à la mission", values: ['utilite', 'reconnaissance'], icon: "star" }
                ]
            },
            {
                context: "Ton bureau est réorganisé.",
                question: "Quelle configuration préfères-tu ?",
                choices: [
                    { text: "Un bureau individuel fermé pour être au calme", values: ['autonomie', 'liberte'], icon: "user" },
                    { text: "Un open-space dynamique pour échanger", values: ['ambiance', 'solidarite'], icon: "messages-square" },
                    { text: "Un espace partagé où l'on gère ses projets librement", values: ['creativite', 'liberte'], icon: "layout" }
                ]
            },
            {
                context: "Le bilan annuel arrive.",
                question: "Quel retour de ton patron te ferait le plus plaisir ?",
                choices: [
                    { text: "\"On te confie plus de responsabilités l'an prochain\"", values: ['evolution', 'challenge'], icon: "trending-up" },
                    { text: "\"Ta présence fait du bien à l'ambiance du groupe\"", values: ['ambiance', 'respect'], icon: "sun" },
                    { text: "\"Ton travail a vraiment un impact sur nos clients\"", values: ['utilite', 'reconnaissance'], icon: "target" }
                ]
            },
            {
                context: "Demain, c'est ta journée de rêve au travail.",
                question: "À quoi ressemble-t-elle ?",
                choices: [
                    { text: "Une journée où tu as appris plein de trucs", values: ['apprentissage', 'creativite'], icon: "book-open" },
                    { text: "Une journée productive et bien payée", values: ['argent', 'securite'], icon: "dollar-sign" },
                    { text: "Une journée où tu as été utile et respecté", values: ['utilite', 'respect'], icon: "shield-check" }
                ]
            }
        ];

        let currentStep = 0;
        let scores = {};
        Object.keys(VALS).forEach(k => scores[k] = 0);
        let selectedChoice = null;

        function renderQuiz() {
            const scenario = SCENARIOS[currentStep];
            const container = document.getElementById('quiz-container');
            
            // Progress
            const progress = ((currentStep + 1) / SCENARIOS.length) * 100;
            document.getElementById('progress-fill').style.width = `${progress}%`;
            document.getElementById('step-label').innerText = `Étape ${currentStep + 1} / ${SCENARIOS.length}`;
            document.getElementById('step-percent').innerText = `${Math.round(progress)}%`;
            
            container.innerHTML = `
                <div class="animate-pop">
                    <div class="mb-12">
                        <p class="text-ls-turquoise font-900 uppercase tracking-widest text-xs mb-4">Situation #${currentStep + 1}</p>
                        <h3 class="text-2xl lg:text-4xl text-ls-dark mb-6 leading-tight max-w-4xl">${scenario.context}</h3>
                        <div class="h-2 w-32 bg-ls-yellow border-2 border-ls-dark"></div>
                    </div>

                    <p class="font-900 text-slate-300 uppercase text-[11px] tracking-[0.3em] mb-10">Quelle est ta réaction ?</p>

                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                        ${scenario.choices.map((c, i) => `
                            <div class="choice-card p-10 flex flex-col items-center text-center gap-8 ${selectedChoice === i ? 'selected' : ''}" onclick="selectOption(${i})">
                                <i data-lucide="${c.icon}" class="w-14 h-14 ${selectedChoice === i ? 'text-white' : 'text-ls-dark'}"></i>
                                <p class="text-base font-900 leading-tight uppercase">${c.text}</p>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
            
            lucide.createIcons();
            document.getElementById('btn-next').disabled = selectedChoice === null;
        }

        function selectOption(index) {
            selectedChoice = index;
            renderQuiz();
        }

        function nextStep() {
            const choice = SCENARIOS[currentStep].choices[selectedChoice];
            choice.values.forEach(v => scores[v]++);

            if (currentStep < SCENARIOS.length - 1) {
                currentStep++;
                selectedChoice = null;
                renderQuiz();
            } else {
                showResults();
            }
        }

        function showResults() {
            document.getElementById('game-view').classList.add('hidden');
            document.getElementById('results-view').classList.remove('hidden');

            const sorted = Object.entries(scores)
                .sort(([,a], [,b]) => b - a)
                .slice(0, 3)
                .map(([id]) => VALS[id]);

            const container = document.getElementById('top3-results');
            container.innerHTML = sorted.map((v, i) => `
                <div class="flex items-start gap-8 group">
                    <span class="text-5xl lg:text-7xl font-900 text-slate-100 leading-none">0${i+1}</span>
                    <div class="pt-2">
                        <h4 class="text-3xl font-900 uppercase text-ls-dark flex items-center gap-4 mb-2">
                            <span class="w-10 h-10 bg-ls-red text-white flex items-center justify-center border-2 border-ls-dark shadow-[4px_4px_0px_var(--ls-dark)]">
                                <i data-lucide="${v.icon}" class="w-5 h-5"></i>
                            </span>
                            ${v.label}
                        </h4>
                        <p class="text-sm text-slate-500 font-bold uppercase tracking-tight max-w-md">${v.desc}</p>
                    </div>
                </div>
            `).join('');

            document.getElementById('pitch-text').innerHTML = `
                "Mon profil professionnel est guidé par des valeurs de <b>${sorted[0].label.toLowerCase()}</b> et de <b>${sorted[1].label.toLowerCase()}</b>. Pour m'épanouir, j'ai besoin d'un environnement qui respecte ces leviers de motivation."
            `;
            
            lucide.createIcons();
            window.scrollTo(0, 0);
        }

        window.onload = renderQuiz;
    </script>
</body>
</html>
